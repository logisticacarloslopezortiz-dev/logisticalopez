# supabase/config.toml

# Configuración del proyecto
project_id = "LogisticaLopezOrtiz"
[auth]
# Deshabilitar el signup por defecto si no se necesita
# enable_signup = false

[api]
# Puerto para el API Gateway local
port = 54321
# Esquemas a exponer en la API
schemas = ["public", "storage", "graphql"]
# Límite máximo de filas que se pueden devolver
max_rows = 1000

[db]
# Puerto para la instancia local de Postgres
port = 54322
# Versión de Postgres a usar
major_version = 15

[studio]
# Puerto para Supabase Studio (el dashboard local)
port = 54323

# Configuración para las Edge Functions
[functions]
# Patrón para importar los ficheros de funciones
# import_map = "supabase/functions/import_map.json"

# ============================================================================
# Definición de Cron Jobs (pg_cron)
# ============================================================================
# Esta sección define los trabajos cronometrados que se ejecutarán en la base de datos.
# La sintaxis es la estándar de cron.
#
# Formato:
# [functions.nombre_del_job]
# cron = "MINUTO HORA DIA MES DIA_SEMANA"
# service = "ID_DEL_PROYECTO_EN_SUPABASE" (esto es un placeholder, Supabase lo gestiona)
# timeout_sec = 600 # Opcional: tiempo de espera en segundos

[functions.process_notification_outbox]
# Ejecutar cada minuto.
cron = "* * * * *"
# El endpoint a llamar es la nueva Edge Function.
# Asegúrate de que el nombre `process-outbox` coincide con el nombre del directorio de la función.
uri = "process-outbox"
# Tiempo de espera de 30 segundos, suficiente para procesar un lote.
timeout_sec = 30
