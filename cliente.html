<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- ‚úÖ Favicon y Iconos para Apple / iOS -->
  <link rel="icon" type="image/x-icon" href="img/favicon.ico" />
  <link rel="apple-touch-icon" href="img/android-chrome-192x192.png" />
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Log√≠stica L√≥pez Ortiz - Solicitud de Servicio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            azulOscuro: '#0C375D',
            azulClaro: '#117D8B',
            acento: '#FBBF24'
          },
          keyframes: {
            fadeInUp: {
              '0%': { opacity: '0', transform: 'translateY(20px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' }
            }
          },
          animation: {
            fadeInUp: 'fadeInUp 0.5s ease-out'
          }
        }
      }
    }
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <!-- Leaflet CSS y JS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet-geosearch@3.11.0/dist/geosearch.css" />

</head>
<body class="bg-gray-100">

  <!-- Hero / Solicitud -->
  <section class="pt-16 pb-16 flex justify-center items-start min-h-screen">
    <div class="w-full max-w-5xl px-4">

      <div class="bg-white rounded-2xl shadow-2xl p-8 animate-fadeInUp">
        <h3 class="text-3xl font-bold text-azulOscuro mb-6 text-center">Solicitud de Servicio</h3>
        <p class="text-gray-600 mb-8 text-center">Completa los 6 pasos para solicitar tu servicio de manera r√°pida y segura.</p>

        <!-- Progress -->
        <div class="flex items-center justify-between mb-6">
          <div class="flex-1 h-2 bg-gray-200 rounded-full relative">
            <div id="progress-bar" class="h-2 bg-azulClaro rounded-full w-0 transition-all duration-500"></div>
          </div>
        </div>

        <!-- Contenedor de Ayuda Din√°mica -->
        <div class="bg-blue-50 border border-blue-200 text-blue-800 p-3 rounded-lg text-sm text-center mb-6 flex items-center justify-center gap-2">
          <i class="fas fa-info-circle"></i>
          <span id="help-text">Ingresa tus datos de contacto. Nos comunicaremos contigo a trav√©s de estos medios.</span>
        </div>

        <!-- Formulario pasos -->
        <form id="serviceForm" class="space-y-6">

          <!-- Paso 1: Datos Personales -->
          <div class="step p-6 border-2 border-azulClaro rounded-xl shadow-md animate-fadeInUp" data-step="1">
            <h4 class="text-xl font-semibold text-azulOscuro mb-4 text-center">Paso 1: Datos Personales</h4>
            <input type="text" placeholder="Nombre completo" class="w-full border p-2 rounded mb-4">
            <input type="tel" placeholder="Tel√©fono" class="w-full border p-2 rounded mb-4">
            <input type="email" placeholder="Correo" class="w-full border p-2 rounded mb-4">

            <!-- Campo RNC opcional -->
            <div class="mb-4">
              <label class="flex items-center space-x-2 cursor-pointer">
                <input type="checkbox" id="hasRNC" class="form-checkbox h-4 w-4 text-azulClaro">
                <span class="text-gray-700">¬øTiene RNC? (Registro Nacional de Contribuyentes)</span>
              </label>
            </div>

            <!-- Campos RNC (ocultos por defecto) -->
            <div id="rncFields" class="hidden space-y-4">
              <input type="text" name="rnc" placeholder="N√∫mero de RNC" class="w-full border p-2 rounded">
              <input type="text" name="empresa" placeholder="Nombre de la empresa" class="w-full border p-2 rounded">
              <!-- Mensaje de ITBIS -->
              <div id="itbisMessage" class="hidden p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800">
                <i class="fas fa-info-circle mr-2"></i>
                Al solicitar una factura con valor de comprobante fiscal (RNC), se aplicar√° un cargo adicional del 18% correspondiente al ITBIS.
              </div>
            </div>

            <div class="mt-6 border-t pt-4 text-center space-y-2">
              <p class="text-gray-600">¬© 2025 Log√≠stica L√≥pez Ortiz</p>
            </div>
          </div>

          <!-- Paso 2: Servicio -->
          <div class="step hidden p-6 border-2 border-azulClaro rounded-xl shadow-md animate-fadeInUp" data-step="2">
            <h4 class="text-xl font-semibold text-azulOscuro mb-4 text-center">Paso 2: Selecciona Servicio</h4>
            <!--
              ESTRUCTURA DE EJEMPLO PARA CADA TARJETA DE SERVICIO (generada por cliente.js)
              Aseg√∫rate de que tu JS genere esta estructura para cada servicio.
            -->
            <!--
            <div class="service-item group relative cursor-pointer overflow-hidden rounded-xl border border-gray-200 bg-white p-3 text-center shadow-md transition-all duration-300 ease-in-out hover:shadow-xl hover:border-azulClaro hover:-translate-y-1" 
                 data-service-id="[ID del servicio]" 
                 data-service-name="[Nombre del Servicio]">
              <div class="relative mb-2 h-32 w-full rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden">
                  <img src="[URL de la imagen]" alt="[Nombre del Servicio]" class="h-28 w-auto object-contain transition-transform duration-300 group-hover:scale-110">
              </div>
              <span class="block truncate font-semibold text-gray-700 group-hover:text-azulOscuro">[Nombre del Servicio]</span>
              <div class="check-indicator absolute top-2 right-2 hidden h-6 w-6 items-center justify-center rounded-full bg-azulClaro text-white">
                <i class="fas fa-check text-xs"></i> 
              </div>
            </div>
            -->
            <div id="service-list" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
              <!-- Los servicios se cargar√°n aqu√≠ din√°micamente -->
            </div>
            
            <style>
              /* Estilos para el indicador de selecci√≥n */
              .service-item.selected, .vehicle-item.selected {
                border-color: #117D8B; /* azulClaro */
                box-shadow: 0 4px 6px -1px rgba(17, 125, 139, 0.2), 0 2px 4px -1px rgba(17, 125, 139, 0.12);
              }
              /* Estilos para la animaci√≥n escalonada */
              @media (max-width: 768px) {
                #service-list .service-item:nth-child(1) { animation-delay: 100ms; }
                #service-list .service-item:nth-child(2) { animation-delay: 200ms; }
                #service-list .service-item:nth-child(3) { animation-delay: 300ms; }
                #service-list .service-item:nth-child(4) { animation-delay: 400ms; }
                #service-list .service-item:nth-child(5) { animation-delay: 500ms; }
                #service-list .service-item:nth-child(6) { animation-delay: 600ms; }
                #service-list .service-item:nth-child(7) { animation-delay: 700ms; }
                #service-list .service-item:nth-child(8) { animation-delay: 800ms; }
                .service-item .p-2 {
                  padding: 0.5rem 0.25rem;
                }
                .service-item span { font-size: 0.8rem; }
              }
            </style>

            <div class="mt-6 border-t pt-4 text-center space-y-2">
              <p class="text-gray-600">¬© 2025 Log√≠stica L√≥pez Ortiz</p>
            </div>
          </div>

          <!-- Paso 3: Veh√≠culo -->
          <div class="step hidden p-6 border-2 border-azulClaro rounded-xl shadow-md animate-fadeInUp" data-step="3">
            <h4 class="text-xl font-semibold text-azulOscuro mb-4 text-center">Paso 3: Selecciona Veh√≠culo</h4>
            <!--
              ESTRUCTURA DE EJEMPLO PARA CADA TARJETA DE VEH√çCULO (generada por cliente.js)
              Aseg√∫rate de que tu JS genere esta estructura para cada veh√≠culo.
            -->
            <!--
            <div class="vehicle-item group relative cursor-pointer overflow-hidden rounded-xl border border-gray-200 bg-white p-3 text-center shadow-md transition-all duration-300 ease-in-out hover:shadow-xl hover:border-azulClaro hover:-translate-y-1" 
                 data-vehicle-id="[ID del veh√≠culo]" 
                 data-vehicle-name="[Nombre del Veh√≠culo]">
              <div class="relative mb-2 h-32 w-full rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden">
                  <img src="[URL de la imagen]" alt="[Nombre del Veh√≠culo]" class="h-28 w-auto object-contain transition-transform duration-300 group-hover:scale-110">
              </div>
              <span class="block truncate font-semibold text-gray-700 group-hover:text-azulOscuro">[Nombre del Veh√≠culo]</span>
              <div class="check-indicator absolute top-2 right-2 hidden h-6 w-6 items-center justify-center rounded-full bg-azulClaro text-white">
                <i class="fas fa-check text-xs"></i> 
              </div>
            </div>
            -->
            <div id="vehicle-list" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                <!-- Los veh√≠culos se cargar√°n aqu√≠ din√°micamente -->
            </div>
            
            <style>
              /* Estilos para la animaci√≥n escalonada */
              @media (max-width: 768px) {
                #vehicle-list .vehicle-item:nth-child(1) { animation-delay: 100ms; }
                #vehicle-list .vehicle-item:nth-child(2) { animation-delay: 200ms; }
                #vehicle-list .vehicle-item:nth-child(3) { animation-delay: 300ms; }
                #vehicle-list .vehicle-item:nth-child(4) { animation-delay: 400ms; }
                #vehicle-list .vehicle-item:nth-child(5) { animation-delay: 500ms; }
                #vehicle-list .vehicle-item:nth-child(6) { animation-delay: 600ms; }
                #vehicle-list .vehicle-item:nth-child(7) { animation-delay: 700ms; }
                .vehicle-item .p-2 {
                  padding: 0.5rem 0.25rem;
                }
                .vehicle-item span { font-size: 0.8rem; }
              }
            </style>

            <div class="mt-6 border-t pt-4 text-center space-y-2">
              <p class="text-gray-600">¬© 2025 Log√≠stica L√≥pez Ortiz</p>
            </div>
          </div>

          <!-- Paso 4: Ubicaci√≥n -->
          <div class="step hidden p-6 border-2 border-azulClaro rounded-xl shadow-md animate-fadeInUp" data-step="4">
            <h4 class="text-xl font-semibold text-azulOscuro mb-4 text-center">Paso 4: Direcci√≥n de Origen y Destino</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div class="relative">
                <div class="flex justify-between items-center mb-1">
                  <label for="pickupAddress" class="block text-sm font-medium text-gray-700">üìç Direcci√≥n de Origen</label>
                </div>
                <input type="text" id="pickupAddress" placeholder="Escribe o selecciona en el mapa" class="w-full border p-2 rounded focus:ring-2 focus:ring-azulClaro">
              </div>
              <div class="relative">
                <label for="deliveryAddress" class="block text-sm font-medium text-gray-700 mb-1">üèÅ Direcci√≥n de Destino</label>
                <input type="text" id="deliveryAddress" placeholder="Primero selecciona el origen" class="w-full border p-2 rounded focus:ring-2 focus:ring-azulClaro disabled:bg-gray-100 disabled:cursor-not-allowed" disabled>
              </div>
            </div>
            <!-- Contenedor del mapa mejorado para m√≥vil -->
            <div id="map-container" class="relative transition-all duration-300">
              <div id="map" class="w-full h-80 rounded-lg border-2 border-green-300 shadow-inner relative flex items-center justify-center bg-green-50">
                <div id="map-loader" class="text-center p-8 text-gray-500 flex flex-col items-center gap-2 z-10">
                  <i class="fas fa-spinner fa-spin text-2xl text-azulClaro"></i>
                  <span id="map-loader-text">Cargando mapa...</span>
                </div>
              </div>
              <!-- Bot√≥n para expandir mapa en m√≥vil -->
              <button type="button" id="expand-map-btn" class="md:hidden absolute top-2 right-2 z-20 bg-white p-2 rounded-full shadow-lg text-azulOscuro">
                <i class="fas fa-expand"></i>
              </button>
              <!-- Bot√≥n para confirmar puntos en vista expandida -->
              <button type="button" id="confirm-map-points-btn" class="hidden absolute bottom-4 left-1/2 -translate-x-1/2 z-[110] bg-azulClaro text-white px-6 py-3 rounded-full shadow-lg font-semibold">
                Confirmar Puntos
              </button>
            </div>
            <div id="distance-container" class="hidden mt-3 text-center bg-gray-100 p-2 rounded-lg">
              <p class="text-gray-800 font-medium">Distancia estimada: <span id="distance-value" class="font-bold text-azulOscuro">--</span> km</p>
            </div>

            <style>
              #map-container.fixed #confirm-map-points-btn { display: block; }
              #map-container.fixed #map { height: 100% !important; border-radius: 0; }
            </style>

            <div class="mt-6 border-t pt-4 text-center space-y-2">
              <p class="text-gray-600">¬© 2025 Log√≠stica L√≥pez Ortiz</p>
            </div>
          </div>

          <!-- Paso 5: Fecha y Hora -->
          <div class="step hidden p-6 border-2 border-azulClaro rounded-xl shadow-md animate-fadeInUp" data-step="5">
            <h4 class="text-xl font-semibold text-azulOscuro mb-4 text-center">Paso 5: Fecha y Hora</h4>
            <input type="date" class="w-full border p-2 rounded mb-4">
            <input type="time" class="w-full border p-2 rounded mb-4">
            <p id="time-message" class="hidden text-sm text-gray-500 text-center mt-2">
              <i class="fas fa-info-circle mr-1"></i>
              Haremos todo lo posible para cumplir con la hora solicitada. Nos pondremos en contacto para confirmar.
            </p>

            <div class="mt-6 border-t pt-4 text-center space-y-2">
              <p class="text-gray-600">¬© 2025 Log√≠stica L√≥pez Ortiz</p>
            </div>
          </div>

          <!-- Paso 6: Confirmaci√≥n -->
          <div class="step hidden p-6 border-2 border-azulClaro rounded-xl shadow-md animate-fadeInUp" data-step="6">
            <h4 class="text-xl font-semibold text-azulOscuro mb-4 text-center">Paso 6: Confirmaci√≥n</h4>
            <p class="text-gray-600 mb-6 text-center">Revisa que todos los datos de tu solicitud sean correctos antes de enviar.</p>
            
            <!-- Contenedor para el resumen de la orden -->
            <div id="order-summary" class="space-y-4 bg-gray-50 p-4 rounded-lg border max-h-96 overflow-y-auto">
              <p class="text-center text-gray-500">Cargando resumen...</p>
            </div>
            <button type="submit" class="w-full bg-azulClaro text-white py-3 rounded-lg font-bold hover:bg-azulOscuro transition mt-6">Enviar Solicitud</button>

            <div class="mt-6 border-t pt-4 text-center space-y-2">
              <p class="text-gray-600">¬© 2025 Log√≠stica L√≥pez Ortiz</p>
            </div>
          </div>

          <!-- Botones de navegaci√≥n -->
          <div class="flex justify-between mt-6">
            <button type="button" id="prevBtn" class="bg-gray-200 text-gray-700 px-6 py-2 rounded-lg font-medium hover:bg-gray-300 transition hidden">Anterior</button>
            <div class="flex-1"></div>
            <button type="button" id="nextBtn" class="bg-azulClaro text-white px-6 py-2 rounded-lg font-medium hover:bg-azulOscuro transition">Siguiente</button>
          </div>

        </form>
      </div>
    </div>
  </section>

  <!-- Modales para preguntas espec√≠ficas de cada servicio -->
  
  <!-- Modal Carga Pesada -->
  <div id="modal-carga-pesada" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold text-azulOscuro">üèóÔ∏è Servicio de Carga Pesada</h3>
            <button class="close-modal text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
          </div>
          <form id="form-carga-pesada" class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2">¬øQu√© tipo de carga se va a transportar?</label>
              <input type="text" name="tipo_carga" placeholder="maquinaria, materiales de construcci√≥n, productos industriales, etc." class="w-full border p-2 rounded" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øCu√°l es el peso total aproximado de la carga?</label>
              <input type="text" name="peso_total" placeholder="Ej: 5 toneladas" class="w-full border p-2 rounded" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øCu√°les son las dimensiones aproximadas (largo, ancho y alto)?</label>
              <input type="text" name="dimensiones" placeholder="Ej: 5m x 2m x 3m" class="w-full border p-2 rounded" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øSe necesita montacargas, gr√∫a o brazo hidr√°ulico para subir o bajar la carga?</label>
              <select name="equipo_carga" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="montacargas">Montacargas</option>
                <option value="grua">Gr√∫a</option>
                <option value="brazo_hidraulico">Brazo hidr√°ulico</option>
                <option value="no_necesita">No necesita</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øLa carga requiere equipos especiales?</label>
              <input type="text" name="equipos_especiales" placeholder="paletas, estibas, correas, cadenas, carretillas, etc." class="w-full border p-2 rounded">
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øLa empresa dispone de personal o montacargas en el punto de carga?</label>
              <select name="personal_disponible" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="si_personal">S√≠, tenemos personal</option>
                <option value="si_montacargas">S√≠, tenemos montacargas</option>
                <option value="si_ambos">S√≠, tenemos ambos</option>
                <option value="no">No disponemos</option>
              </select>
            </div>
            <div class="flex justify-end space-x-2 pt-4">
              <button type="button" class="close-modal px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancelar</button>
              <button type="submit" class="px-4 py-2 bg-azulClaro text-white rounded hover:bg-azulOscuro">Continuar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Paqueter√≠a -->
  <div id="modal-paqueteria" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold text-azulOscuro">üì¶ Servicio de Paqueter√≠a</h3>
            <button class="close-modal text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
          </div>
          <form id="form-paqueteria" class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2">¬øQu√© tipo de art√≠culo desea enviar?</label>
              <input type="text" name="tipo_articulo" placeholder="Documentos, productos, regalos, etc." class="w-full border p-2 rounded" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øEs un solo paquete o varios bultos?</label>
              <select name="cantidad_paquetes" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="uno">Un solo paquete</option>
                <option value="varios">Varios bultos</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øLos paquetes est√°n debidamente empacados o sellados?</label>
              <select name="empacado" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="si">S√≠, est√°n empacados</option>
                <option value="no">No, necesitan empaque</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øEl paquete debe ser transportado en veh√≠culo cerrado o en moto?</label>
              <select name="tipo_vehiculo" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="vehiculo_cerrado">Veh√≠culo cerrado</option>
                <option value="moto">Moto</option>
                <option value="cualquiera">Cualquiera</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øHabr√° alguien disponible para entregar y recibir el paquete en ambos puntos?</label>
              <select name="persona_disponible" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="si_ambos">S√≠, en ambos puntos</option>
                <option value="solo_origen">Solo en origen</option>
                <option value="solo_destino">Solo en destino</option>
                <option value="no">No habr√° nadie</option>
              </select>
            </div>
            <div class="flex justify-end space-x-2 pt-4">
              <button type="button" class="close-modal px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancelar</button>
              <button type="submit" class="px-4 py-2 bg-azulClaro text-white rounded hover:bg-azulOscuro">Continuar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Fletes -->
  <div id="modal-flete" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold text-azulOscuro">üöö Servicio de Fletes</h3>
            <button class="close-modal text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
          </div>
          <form id="form-flete" class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2">¬øQu√© tipo de carga desea transportar?</label>
              <input type="text" name="tipo_carga" placeholder="Mercanc√≠a general, productos, materiales, etc." class="w-full border p-2 rounded" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øCu√°l es el peso aproximado total?</label>
              <input type="text" name="peso_total" placeholder="Ej: 2 toneladas" class="w-full border p-2 rounded" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øCu√°ntas unidades o bultos son en total?</label>
              <input type="number" name="cantidad_bultos" placeholder="N√∫mero de bultos" class="w-full border p-2 rounded" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øRequiere ayudantes para cargar o descargar la mercanc√≠a?</label>
              <select name="ayudantes" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="si">S√≠, necesito ayudantes</option>
                <option value="no">No, no necesito</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øSe necesita montacargas, gr√∫a, rampa o polea para subir o bajar la carga?</label>
              <select name="equipo_necesario" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="montacargas">Montacargas</option>
                <option value="grua">Gr√∫a</option>
                <option value="rampa">Rampa</option>
                <option value="polea">Polea</option>
                <option value="no_necesita">No necesita</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øLa empresa dispone de personal o montacargas en el punto de carga?</label>
              <select name="personal_disponible" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="si_personal">S√≠, tenemos personal</option>
                <option value="si_montacargas">S√≠, tenemos montacargas</option>
                <option value="si_ambos">S√≠, tenemos ambos</option>
                <option value="no">No disponemos</option>
              </select>
            </div>
            <div class="flex justify-end space-x-2 pt-4">
              <button type="button" class="close-modal px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancelar</button>
              <button type="submit" class="px-4 py-2 bg-azulClaro text-white rounded hover:bg-azulOscuro">Continuar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Transporte Comercial -->
  <div id="modal-transporte-comercial" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold text-azulOscuro">üè¢ Servicio de Transporte Comercial</h3>
            <button class="close-modal text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
          </div>
          <form id="form-transporte-comercial" class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2">¬øQu√© tipo de productos o mercanc√≠a desea transportar?</label>
              <input type="text" name="tipo_productos" placeholder="Productos comerciales, mercanc√≠a, etc." class="w-full border p-2 rounded" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øLa carga es propia de la empresa o de un cliente?</label>
              <select name="propiedad_carga" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="propia">Propia de la empresa</option>
                <option value="cliente">De un cliente</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øCu√°ntas unidades, cajas o paletas ser√°n transportadas?</label>
              <input type="number" name="cantidad_unidades" placeholder="N√∫mero de unidades" class="w-full border p-2 rounded" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øCu√°l es el peso total aproximado?</label>
              <input type="text" name="peso_total" placeholder="Ej: 1.5 toneladas" class="w-full border p-2 rounded" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øRequiere ayudantes adicionales para carga y descarga?</label>
              <select name="ayudantes_adicionales" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="si">S√≠, necesito ayudantes</option>
                <option value="no">No, no necesito</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øLa empresa dispone de personal o montacargas en el punto de carga?</label>
              <select name="personal_disponible" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="si_personal">S√≠, tenemos personal</option>
                <option value="si_montacargas">S√≠, tenemos montacargas</option>
                <option value="si_ambos">S√≠, tenemos ambos</option>
                <option value="no">No disponemos</option>
              </select>
            </div>
            <div class="flex justify-end space-x-2 pt-4">
              <button type="button" class="close-modal px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancelar</button>
              <button type="submit" class="px-4 py-2 bg-azulClaro text-white rounded hover:bg-azulOscuro">Continuar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Mudanza (Optimizado) -->
  <div id="modal-mudanza" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold text-azulOscuro">üè† Servicio de Mudanza</h3>
            <button type="button" class="close-modal text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
          </div>
          <form id="form-mudanza" class="space-y-6">
            <div class="bg-blue-50 border border-blue-200 text-blue-900 text-sm p-3 rounded">
              <i class="fas fa-info-circle mr-1"></i>
              Indica la cantidad de cada objeto a trasladar. Esto nos ayuda a estimar el tama√±o del cami√≥n y el personal necesario.
            </div>

            <!-- 1. Inventario de Objetos -->
            <fieldset>
              <legend class="text-lg font-semibold text-azulOscuro mb-3">1. Inventario de Objetos</legend>
              <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                <div class="item-control flex flex-col items-center p-3 border rounded-lg bg-gray-50">
                  <i class="fas fa-bed text-2xl text-azulClaro mb-2"></i>
                  <label class="font-medium text-sm text-gray-800">Camas</label>
                  <div class="flex items-center mt-2">
                    <button type="button" class="qty-btn h-8 w-8 bg-gray-200 rounded-l-md text-lg font-bold hover:bg-gray-300">-</button>
                    <input type="number" min="0" name="item_camas_qty" value="0" class="w-12 h-8 text-center border-t border-b focus:outline-none focus:ring-1 focus:ring-azulClaro">
                    <button type="button" class="qty-btn h-8 w-8 bg-gray-200 rounded-r-md text-lg font-bold hover:bg-gray-300">+</button>
                  </div>
                </div>
                <div class="item-control flex flex-col items-center p-3 border rounded-lg bg-gray-50">
                  <i class="fas fa-couch text-2xl text-azulClaro mb-2"></i>
                  <label class="font-medium text-sm text-gray-800">Sof√°s</label>
                  <div class="flex items-center mt-2">
                    <button type="button" class="qty-btn h-8 w-8 bg-gray-200 rounded-l-md text-lg font-bold hover:bg-gray-300">-</button>
                    <input type="number" min="0" name="item_sofas_qty" value="0" class="w-12 h-8 text-center border-t border-b focus:outline-none focus:ring-1 focus:ring-azulClaro">
                    <button type="button" class="qty-btn h-8 w-8 bg-gray-200 rounded-r-md text-lg font-bold hover:bg-gray-300">+</button>
                  </div>
                </div>
                <div class="item-control flex flex-col items-center p-3 border rounded-lg bg-gray-50">
                  <i class="fas fa-box-open text-2xl text-azulClaro mb-2"></i>
                  <label class="font-medium text-sm text-gray-800">Cajas</label>
                  <div class="flex items-center mt-2">
                    <button type="button" class="qty-btn h-8 w-8 bg-gray-200 rounded-l-md text-lg font-bold hover:bg-gray-300">-</button>
                    <input type="number" min="0" name="item_cajas_qty" value="0" class="w-12 h-8 text-center border-t border-b focus:outline-none focus:ring-1 focus:ring-azulClaro">
                    <button type="button" class="qty-btn h-8 w-8 bg-gray-200 rounded-r-md text-lg font-bold hover:bg-gray-300">+</button>
                  </div>
                </div>
                <div class="item-control flex flex-col items-center p-3 border rounded-lg bg-gray-50">
                  <i class="fas fa-chair text-2xl text-azulClaro mb-2"></i>
                  <label class="font-medium text-sm text-gray-800">Sillas</label>
                  <div class="flex items-center mt-2">
                    <button type="button" class="qty-btn h-8 w-8 bg-gray-200 rounded-l-md text-lg font-bold hover:bg-gray-300">-</button>
                    <input type="number" min="0" name="item_sillas_qty" value="0" class="w-12 h-8 text-center border-t border-b focus:outline-none focus:ring-1 focus:ring-azulClaro">
                    <button type="button" class="qty-btn h-8 w-8 bg-gray-200 rounded-r-md text-lg font-bold hover:bg-gray-300">+</button>
                  </div>
                </div>
                <div class="item-control flex flex-col items-center p-3 border rounded-lg bg-gray-50">
                  <i class="fas fa-tv text-2xl text-azulClaro mb-2"></i>
                  <label class="font-medium text-sm text-gray-800">Nevera/TV</label>
                  <div class="flex items-center mt-2">
                    <button type="button" class="qty-btn h-8 w-8 bg-gray-200 rounded-l-md text-lg font-bold hover:bg-gray-300">-</button>
                    <input type="number" min="0" name="item_electro_qty" value="0" class="w-12 h-8 text-center border-t border-b focus:outline-none focus:ring-1 focus:ring-azulClaro">
                    <button type="button" class="qty-btn h-8 w-8 bg-gray-200 rounded-r-md text-lg font-bold hover:bg-gray-300">+</button>
                  </div>
                </div>
                <div class="item-control flex flex-col items-center p-3 border rounded-lg bg-gray-50">
                  <i class="fas fa-ellipsis-h text-2xl text-azulClaro mb-2"></i>
                  <label class="font-medium text-sm text-gray-800">Otros</label>
                  <div class="flex items-center mt-2">
                    <button type="button" class="qty-btn h-8 w-8 bg-gray-200 rounded-l-md text-lg font-bold hover:bg-gray-300">-</button>
                    <input type="number" min="0" name="item_otros_qty" value="0" class="w-12 h-8 text-center border-t border-b focus:outline-none focus:ring-1 focus:ring-azulClaro">
                    <button type="button" class="qty-btn h-8 w-8 bg-gray-200 rounded-r-md text-lg font-bold hover:bg-gray-300">+</button>
                  </div>
                </div>
              </div>
              <div class="col-span-2 sm:col-span-3 mt-2">
                <label class="block text-sm font-medium mb-1">Describa otros objetos (si aplica)</label>
                <input type="text" name="otros_objetos_desc" placeholder="Ej: 1 escritorio, 2 armarios, etc." class="w-full border p-2 rounded">
              </div>
            </fieldset>

            <!-- 2. Objetos Fr√°giles -->
            <fieldset>
              <legend class="text-lg font-semibold text-azulOscuro mb-3">2. Objetos Especiales</legend>
              <div>
                <label class="block text-sm font-medium mb-1">¬øHay objetos fr√°giles o de valor?</label>
                <select id="tiene_fragiles" name="tiene_fragiles" class="w-full border p-2 rounded" required>
                  <option value="no">No</option>
                  <option value="si">S√≠</option>
                </select>
              </div>
              <div id="descripcion_fragiles_container" class="hidden mt-2">
                <label class="block text-sm font-medium mb-1">Describa los objetos fr√°giles</label>
                <textarea name="objetos_fragiles_desc" placeholder="Ej: Espejos grandes, cuadros, TV de 75 pulgadas" class="w-full border p-2 rounded h-20"></textarea>
              </div>
            </fieldset>

            <!-- 3. Acceso en Origen y Destino -->
            <fieldset>
              <legend class="text-lg font-semibold text-azulOscuro mb-3">3. Detalles de Acceso</legend>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4">
                <!-- Origen -->
                <div class="space-y-2">
                  <h5 class="font-semibold text-gray-700">Punto de Origen</h5>
                  <label class="block text-sm font-medium">Tipo de vivienda</label>
                  <select name="tipo_vivienda_origen" class="w-full border p-2 rounded" required>
                    <option value="">Seleccione...</option>
                    <option value="casa">Casa</option>
                    <option value="apartamento">Apartamento</option>
                    <option value="oficina">Oficina</option>
                    <option value="local_comercial">Local comercial</option>
                    <option value="otro">Otro</option>
                  </select>
                  <label class="block text-sm font-medium">Piso y Acceso</label>
                  <div class="flex gap-2">
                    <input type="text" name="piso_origen" placeholder="Piso" class="w-1/2 border p-2 rounded" required>
                    <select name="acceso_origen" class="w-1/2 border p-2 rounded" required>
                      <option value="">Acceso</option>
                      <option value="ascensor">Ascensor</option>
                      <option value="escaleras">Escaleras</option>
                    </select>
                  </div>
                </div>
                <!-- Destino -->
                <div class="space-y-2">
                  <h5 class="font-semibold text-gray-700">Punto de Destino</h5>
                  <label class="block text-sm font-medium">Tipo de vivienda</label>
                  <select name="tipo_vivienda_destino" class="w-full border p-2 rounded" required>
                    <option value="">Seleccione...</option>
                    <option value="casa">Casa</option>
                    <option value="apartamento">Apartamento</option>
                    <option value="oficina">Oficina</option>
                    <option value="local_comercial">Local comercial</option>
                    <option value="otro">Otro</option>
                  </select>
                  <label class="block text-sm font-medium">Piso y Acceso</label>
                  <div class="flex gap-2">
                    <input type="text" name="piso_destino" placeholder="Piso" class="w-1/2 border p-2 rounded" required>
                    <select name="acceso_destino" class="w-1/2 border p-2 rounded" required>
                      <option value="">Acceso</option>
                      <option value="ascensor">Ascensor</option>
                      <option value="escaleras">Escaleras</option>
                    </select>
                  </div>
                </div>
              </div>
            </fieldset>

            <div class="flex justify-end space-x-2 pt-6 border-t mt-6">
              <button type="button" class="close-modal px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancelar</button>
              <button type="submit" class="px-4 py-2 bg-azulClaro text-white rounded hover:bg-azulOscuro">Guardar y Continuar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Gr√∫a Veh√≠culo -->
  <div id="modal-grua-vehiculo" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold text-azulOscuro">üöó Servicio de Gr√∫a de Veh√≠culo</h3>
            <button class="close-modal text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
          </div>
          <form id="form-grua-vehiculo" class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2">¬øQu√© tipo de veh√≠culo es?</label>
              <select name="tipo_vivienda_origen" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="carro">Carro</option>
                <option value="jeepeta">Jeepeta</option>
                <option value="camioneta">Camioneta</option>
                <option value="camion">Cami√≥n</option>
                <option value="motor">Motor</option>
                <option value="otro">Otro</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øCu√°l es la marca, modelo y color del veh√≠culo?</label>
              <div class="grid grid-cols-3 gap-2">
                <input type="text" name="marca" placeholder="Marca" class="border p-2 rounded" required>
                <input type="text" name="modelo" placeholder="Modelo" class="border p-2 rounded" required>
                <input type="text" name="color" placeholder="Color" class="border p-2 rounded" required>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øEl veh√≠culo tiene tracci√≥n delantera, trasera o es 4x4?</label>
              <select name="traccion" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="delantera">Tracci√≥n delantera</option>
                <option value="trasera">Tracci√≥n trasera</option>
                <option value="4x4">4x4</option>
                <option value="no_se">No s√©</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øQu√© tipo de servicio necesita?</label>
              <select name="tipo_servicio" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="remolque_averia">Remolque por aver√≠a</option>
                <option value="accidente_transito">Accidente de tr√°nsito</option>
                <option value="traslado_preventivo">Traslado preventivo</option>
                <option value="retiro_taller">Retiro del taller o entrega a domicilio</option>
              </select>
            </div>
            <div class="flex justify-end space-x-2 pt-4">
              <button type="button" class="close-modal px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancelar</button>
              <button type="submit" class="px-4 py-2 bg-azulClaro text-white rounded hover:bg-azulOscuro">Continuar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Gr√∫a Carga -->
  <div id="modal-grua-de-carga" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold text-azulOscuro">üèãÔ∏è Servicio de Gr√∫a de Carga</h3>
            <button class="close-modal text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
          </div>
          <form id="form-grua-carga" class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2">¬øQu√© tipo de carga necesita mover o levantar?</label>
              <input type="text" name="tipo_carga" placeholder="contenedor, maquinaria, estructura met√°lica, generador, cami√≥n, etc." class="w-full border p-2 rounded" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øCu√°l es el peso aproximado de la carga?</label>
              <input type="text" name="peso_carga" placeholder="Ej: 10 toneladas" class="w-full border p-2 rounded" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øCuenta con puntos de anclaje o enganche para izar la carga de forma segura?</label>
              <select name="puntos_anclaje" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="si">S√≠, cuenta con puntos de anclaje</option>
                <option value="no">No, necesita evaluaci√≥n</option>
                <option value="no_se">No estoy seguro</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øQu√© tipo de maniobra se realizar√°?</label>
              <select name="tipo_maniobra" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="izado_vertical">Izado vertical</option>
                <option value="carga_transporte">Carga y transporte</option>
                <option value="descarga_reubicacion">Descarga o reubicaci√≥n en el mismo sitio</option>
              </select>
            </div>
            <div class="flex justify-end space-x-2 pt-4">
              <button type="button" class="close-modal px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancelar</button>
              <button type="submit" class="px-4 py-2 bg-azulClaro text-white rounded hover:bg-azulOscuro">Continuar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Botes Mineros -->
  <div id="modal-botes-mineros" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold text-azulOscuro">‚õèÔ∏è Servicio de Botes Mineros</h3>
            <button class="close-modal text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
          </div>
          <form id="form-botes-mineros" class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2">¬øQu√© tipo de material desea transportar?</label>
              <select name="tipo_material" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="material_construccion">Material de construcci√≥n</option>
                <option value="desechos">Desechos</option>
                <option value="arena">Arena</option>
                <option value="escombros">Escombros</option>
                <option value="cemento">Cemento</option>
                <option value="otro">Otro (especificar)</option>
              </select>
              <input type="text" name="material_otro" placeholder="Especifique otro material" class="w-full border p-2 rounded mt-2 hidden">
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">¬øEl lugar es accesible para un cami√≥n?</label>
                <select name="tipo_vivienda_origen" class="w-full border p-2 rounded" required>
                <option value="">Seleccione una opci√≥n</option>
                <option value="si">S√≠, es accesible</option>
                <option value="no">No, es de dif√≠cil acceso</option>
                <option value="no_se">No estoy seguro</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">Prioridad del servicio</label>
              <select name="prioridad" class="w-full border p-2 rounded" required>
                <option value="normal">Servicio Normal</option>
                <option value="urgente">Servicio Urgente</option>
              </select>
            </div>
            <div class="flex justify-end space-x-2 pt-4">
              <button type="button" class="close-modal px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancelar</button>
              <button type="submit" class="px-4 py-2 bg-azulClaro text-white rounded hover:bg-azulOscuro">Continuar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/supabase-config.js"></script>
  <!-- Leaflet JS y GeoSearch -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="https://unpkg.com/leaflet-geosearch@3.11.0/dist/geosearch.umd.js"></script>

  <script src="js/notifications.js"></script>
  <script src="js/pwa.js"></script>
  <script src="js/cliente.js?v=1.3"></script>
</body>
</html>
